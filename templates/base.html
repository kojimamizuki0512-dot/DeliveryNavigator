{% load static %}
<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>{% block title %}Delivery Navigator{% endblock %}</title>
  <link rel="stylesheet" href="{% static 'base.css' %}">
  <style>
    :root { --bg:#0f172a; --fg:#e2e8f0; --muted:#94a3b8; --link:#38bdf8; }
    body{margin:0;font-family:system-ui,-apple-system,'Segoe UI',Roboto,'Noto Sans JP',sans-serif;background:#0b1020;color:#e6edf3}
    header{position:sticky;top:0;background:var(--bg);border-bottom:1px solid #1f2a44;z-index:10}
    .wrap{max-width:1100px;margin:0 auto;padding:12px 16px}
    nav{display:flex;gap:12px;align-items:center;flex-wrap:wrap}
    a.brand{font-weight:700;letter-spacing:.3px;margin-right:12px;color:#fff;text-decoration:none}
    a.nav{color:var(--fg);text-decoration:none;padding:8px 10px;border-radius:8px}
    a.nav:hover{background:#111b33}
    a.nav.active{background:#1b2a4a}
    main{max-width:1100px;margin:0 auto;padding:24px 16px}
    .grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(240px,1fr));gap:16px;margin-top:16px}
    .card{background:#0f1a33;border:1px solid #203055;border-radius:14px;padding:16px}
    .card h3{margin:0 0 6px 0}
    .muted{color:#9fb1cc}
    footer{border-top:1px solid #1f2a44;margin-top:24px}
    table{width:100%;border-collapse:collapse}
    th,td{padding:8px 10px;border-bottom:1px solid #203055;text-align:left}
    th{color:#c7d4ea}
    .btn{padding:6px 10px;border:1px solid #203055;border-radius:8px;background:#0f1a33;color:#e6edf3;text-decoration:none;cursor:pointer}
    .btn:hover{background:#14254a}
    dialog{border:1px solid #203055;border-radius:12px;background:#0f1a33;color:#e6edf3}
    input,select{background:#0b162f;border:1px solid #203055;border-radius:8px;color:#e6edf3;padding:6px 8px}
  </style>
</head>
<body>
<header>
  <div class="wrap">
    <nav>
      <a class="brand" href="{% url 'home' %}">Delivery Navigator</a>
      {% with current=request.resolver_match.url_name %}
        <a class="nav {% if current == 'home' %}active{% endif %}" href="{% url 'home' %}">ホーム</a>
        <a class="nav {% if current == 'dashboard' %}active{% endif %}" href="{% url 'dashboard' %}">ダッシュボード</a>
        <a class="nav {% if current == 'records' %}active{% endif %}" href="{% url 'records' %}">実績一覧</a>
        <a class="nav {% if current == 'map' %}active{% endif %}" href="{% url 'map' %}">AIマップ</a>
        <a class="nav {% if current == 'upload' %}active{% endif %}" href="{% url 'upload' %}">データ取込</a>
        <span style="flex:1"></span>
        {% if request.user.is_authenticated %}
          <span class="muted">こんにちは、{{ request.user.username }}さん</span>
          <a class="nav" href="{% url 'logout' %}">ログアウト</a>
        {% else %}
          <a class="nav {% if current == 'login' %}active{% endif %}" href="{% url 'login' %}">ログイン</a>
          <a class="nav {% if current == 'signup' %}active{% endif %}" href="{% url 'signup' %}">新規登録</a>
        {% endif %}
      {% endwith %}
    </nav>
  </div>
</header>

<main class="wrap">
  {% block content %}{% endblock %}
</main>

<footer>
  <div class="wrap muted" style="padding:16px">© {{ now|default:None|date:"Y" }} Delivery Navigator</div>
</footer>
</body>
</html>
