{% load static %}
<!doctype html>
<html lang="ja">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>{% block title %}Delivery Navigator{% endblock %}</title>
  <link rel="icon" href="{% static 'favicon.ico' %}">
  <style>
    :root{
      --bg:#0b162f; --panel:#0f1e3d; --card:#13244a; --ink:#e6edf3;
      --muted:#9fb3c8; --line:#1f2e56; --accent:#4cc9f0;
    }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{margin:0;background:var(--bg);color:var(--ink);
      font:14px/1.6 system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial}
    a{color:inherit;text-decoration:none}
    .wrap{max-width:1100px;margin:0 auto;padding:16px}
    .nav{background:#0e1b36;border-bottom:1px solid var(--line);position:sticky;top:0;z-index:10}
    .brand{font-weight:800;letter-spacing:.2px}
    .nav ul{display:flex;gap:14px;list-style:none;margin:0;padding:0}
    .nav a.active{color:var(--accent)}
    .btn{display:inline-flex;align-items:center;gap:6px;padding:.56rem .84rem;border-radius:10px;background:#1c2d57;color:#fff;border:1px solid #2b3d6a;cursor:pointer;transition:.15s}
    .btn:hover{filter:brightness(1.06)}
    .btn.primary{background:linear-gradient(135deg,#2b6cb0,#3182ce);border-color:#2b6cb0}
    .btn.ghost{background:transparent;border:1px solid var(--line)}
    .chip{display:inline-block;padding:.22rem .56rem;border:1px solid var(--line);border-radius:999px;font-size:12px;color:var(--muted)}
    .card{background:var(--card);border:1px solid var(--line);border-radius:14px;padding:16px}
    .grid{display:grid;gap:12px}
    .grid.cols-3{grid-template-columns:repeat(3,minmax(0,1fr))}
    .grid.cols-2{grid-template-columns:repeat(2,minmax(0,1fr))}
    @media (max-width:900px){.grid.cols-3,.grid.cols-2{grid-template-columns:1fr}}
    .muted{color:var(--muted)}
    footer{color:var(--muted);padding:26px 0;border-top:1px solid var(--line);margin-top:28px}
    table{width:100%;border-collapse:collapse;border:1px solid var(--line);border-radius:12px;overflow:hidden}
    thead th{background:#11234a;color:#cfe3ff;text-align:left;padding:10px;border-bottom:1px solid var(--line)}
    tbody td{padding:10px;border-bottom:1px solid var(--line)}
    tbody tr:hover{background:#0e1f41}
    input,select{width:100%;background:#0e1f41;border:1px solid var(--line);color:var(--ink);padding:.56rem .62rem;border-radius:10px}
    input:focus,select:focus{outline:2px solid #3059b4;outline-offset:1px}
    label{font-size:12px;color:#b7c6de}
    .row{display:flex;gap:10px;flex-wrap:wrap}
    .fullbleed{position:relative;left:50%;right:50%;margin-left:-50vw;margin-right:-50vw;width:100vw}
    .hero{position:relative;border-radius:0;overflow:hidden;border-bottom:1px solid var(--line)}
    .hero--fullscreen{min-height:92vh}
    .hero-art{position:absolute;inset:0}
    .hero-art svg{width:100%;height:100%;display:block}
    .hero-overlay{position:absolute; inset:0; display:flex; align-items:end;
      background:linear-gradient(180deg,rgba(7,12,24,0.05) 0%, rgba(7,12,24,0.45) 60%, rgba(7,12,24,0.70) 100%);}
    @media (max-width:900px){
      .hero--fullscreen{min-height:80vh}
      .hero-overlay{align-items:flex-end}
    }
  </style>
  {% block extra_head %}{% endblock %}
</head>
<body>
  <nav class="nav">
    <div class="wrap" style="display:flex;align-items:center;justify-content:space-between;gap:16px;">
      <a class="brand" href="{% url 'home' %}">Delivery Navigator</a>
      <ul>
        <li><a href="{% url 'home' %}" class="{% if request.resolver_match.url_name == 'home' %}active{% endif %}">ホーム</a></li>
        <li><a href="{% url 'dashboard' %}" class="{% if request.resolver_match.url_name == 'dashboard' %}active{% endif %}">ダッシュボード</a></li>
        <li><a href="{% url 'map' %}" class="{% if request.resolver_match.url_name == 'map' %}active{% endif %}">AIマップ</a></li>
        <li><a href="/records" class="{% if request.path|slice:':8' == '/records' %}active{% endif %}">データ</a></li>
        <li><a href="/upload"  class="{% if request.path|slice:':7' == '/upload' %}active{% endif %}">取込</a></li>
      </ul>
      <div>
        {% if request.user.is_authenticated %}
          <span class="muted">こんにちは、{{ request.user.username }}さん</span>
          <a class="btn" href="{% url 'logout' %}">ログアウト</a>
        {% else %}
          <a class="btn ghost" href="{% url 'login' %}">ログイン</a>
          <a class="btn primary" href="{% url 'signup' %}" style="margin-left:8px">新規登録</a>
        {% endif %}
      </div>
    </div>
  </nav>

  <main class="wrap">
    {% block header %}{% endblock %}
    {% block content %}{% endblock %}
  </main>

  <footer>
    <div class="wrap muted">© {{ now|date:"Y" }} Delivery Navigator</div>
  </footer>
  {% block extra_scripts %}{% endblock %}
</body>
</html>
